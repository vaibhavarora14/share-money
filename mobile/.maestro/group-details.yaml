appId: com.sharemoney.app
---
# Test: Group Details
# This test verifies that a user can view group details after signing in
# Prerequisites: User must be signed in and have at least one group

- launchApp
- waitForAnimationToEnd

# Check if already signed in, if not sign in first
- runFlow:
    when:
      visible: "Welcome Back"
    commands:
      - tapOn:
          text: "Email"
      - inputText: "alice@test.com"
      - tapOn:
          text: "Password"
      - inputText: "testpassword123"
      - tapOn:
          text: "Sign In"
      - waitForAnimationToEnd

# Wait for groups list to load
- waitForAnimationToEnd
- assertVisible: "Groups"

# Wait for groups to load
- waitForAnimationToEnd

# Tap on a group by name
- tapOn:
    text: "Summer Vacation 2024"

# Wait for group details screen to load
- waitForAnimationToEnd


# Verify group details screen elements are visible
# The screen now uses segmented buttons to switch between views
- assertVisible:
    text: "Transactions"
- assertVisible:
    text: "Balances"
- assertVisible:
    text: "Members"

# Test switching to Balances tab
- tapOn:
    text: "Balances"
- waitForAnimationToEnd

# Verify Balances content is visible
- assertVisible:
    text: "Your Balances"
- assertVisible:
    text: "Settlements"

# Test switching to Members tab
- tapOn:
    text: "Members"
- waitForAnimationToEnd

# Verify Members section content is visible
- assertVisible:
    text: "Add Member"

# Switch back to Transactions tab
- tapOn:
    text: "Transactions"
- waitForAnimationToEnd


- tapOn:
    text: "Navigate back"
    optional: true

# Wait for navigation
- waitForAnimationToEnd

# Verify we're back on groups list
- assertVisible: "Groups"

# Go to group details again to test Android native back button
- waitForAnimationToEnd
- tapOn:
    text: "Summer Vacation 2024"

# Wait for group details screen to load
- waitForAnimationToEnd

# Verify we're on group details screen again by checking segmented buttons
- assertVisible:
    text: "Transactions"

# Test Android native back button
- pressKey: "Back"

# Wait for navigation
- waitForAnimationToEnd

# Verify we're back on groups list
- assertVisible: "Groups"
